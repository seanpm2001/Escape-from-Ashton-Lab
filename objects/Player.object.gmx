<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_player</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-10</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>hp = 5; 
maxhp = 5;
pc = 0;
//Player audio emitter
playera_em = audio_emitter_create();

///Shooting Modes
spray = false; 
grenade = false; 
piercing = false; 

baseFire = PlayerStats.dexterity;
shotFire = 35; 
grenadeFire = 35;
global.fireRate = PlayerStats.dexterity;
global.invincibility = false;


//Flash variables

level_flash = 0;
MAX_LEVEL_FLASH = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Flash on level up
image_blend = c_white;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.invincible = false;
image_blend = c_white;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Turn off piercing 

piercing = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Turn off grenade 
grenade = 0; 
if(spray){
    global.fireRate = shotFire;
} else {
    global.fireRate = baseFire;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Turn off spray 

spray = 0; 
global.fireRate = baseFire;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var light_color_1 = make_color_rgb(255, 110, 70);
var light_color_2 = make_color_rgb(255, 138, 103);
var light_color_3 = make_color_rgb(255, 153, 121);
var draw_color = 0;
switch(irandom_range(0,3)){
    case 0: 
        draw_color = light_color_1;
        break;
    case 1: 
        draw_color = light_color_2; 
        break; 
    case 2: 
        draw_color = light_color_3; 
        break;
    default:
        draw_color = c_orange;
        break;
}



size = 300; 
draw_set_blend_mode(bm_subtract);
surface_set_target(light);

draw_ellipse_color(x - size / 2 - view_xview, y - size/2 - view_yview, x+size /2 - view_xview, y + size / 2 - view_yview, draw_color, c_black, false);

surface_reset_target();
draw_set_blend_mode(bm_normal);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Get input and move, death
var spd = PlayerStats.agility;
var hspd = (keyboard_check(ord('D'))-keyboard_check(ord('A')))*spd;
var vspd = (keyboard_check(ord('S'))-keyboard_check(ord('W')))*spd;
global.fireCounter += 1;
//Move 
move(hspd, vspd);

depth = -y;
if (PlayerStats.hp &lt; 1) { 
    game_restart();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_heal">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>PlayerStats.hp += 5; 
if(PlayerStats.hp + 5 &gt; PlayerStats.max_hp){
    PlayerStats.hp = PlayerStats.max_hp;
}

with (other) {
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_pwr_grenade">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>grenade = true; 
alarm[1] = 3 * room_speed;
global.fireRate = grenadeFire;
with (other) {
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_pwr_shotty">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

spray = true; 
alarm[0] = 10 * room_speed;
global.fireRate = shotFire;
with (other) {
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_ebullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!global.invincible){
    PlayerStats.hp = PlayerStats.hp - 1; 
    global.invincible = true; 
    alarm[3] = 10;
    audio_emitter_pitch(playera_em, 1);
    audio_emitter_gain(playera_em, .3);
    audio_play_sound_on(playera_em, snd_player_hurt, false, 10);
    image_blend = c_red;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="Enemy">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!global.invincible){
    PlayerStats.hp = PlayerStats.hp - 1; 
    global.invincible = true; 
    alarm[3] = 10;
    global.shake = 8;
    audio_emitter_pitch(playera_em, 1);
    audio_emitter_gain(playera_em, .3);
    audio_play_sound_on(playera_em, snd_player_hurt, false, 10);
    image_blend = c_red;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="Boss">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!global.invincible){
    PlayerStats.hp = PlayerStats.hp - 1; 
    global.invincible = true; 
    alarm[3] = 10;
    global.shake = 8;
    image_blend = c_red;
    audio_emitter_pitch(playera_em, 1);
    audio_emitter_gain(playera_em, .3);
    audio_play_sound_on(playera_em, snd_player_hurt, false, 5);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="50">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Firing bullets on 
if(global.fireCounter &gt;= global.fireRate){
    if (spray &amp;&amp; grenade){
        audio_emitter_pitch(playera_em, 1);
        audio_emitter_gain(playera_em, .3);
        audio_play_sound_on(playera_em, snd_shotgun, false, 5);
        bullet = instance_create(x,y,obj_grenade);
        bullet.speed = 10;
        bullet.direction = point_direction(x,y, mouse_x, mouse_y);
        bullet.image_angle = bullet.direction;
        
        bullet2 = instance_create(x,y,obj_grenade);
        bullet2.speed = 10;
        bullet2.direction = point_direction(x,y, mouse_x, mouse_y) + 7;
        bullet2.image_angle = bullet2.direction;
        
        bullet3 = instance_create(x,y,obj_grenade);
        bullet3.speed = 10;
        bullet3.direction = point_direction(x,y, mouse_x, mouse_y) - 7;
        bullet3.image_angle = bullet3.direction;
        global.shake = 15;
        effect_create_above(ef_smoke,x,y, 0, c_gray);

    } else if (spray) {
        audio_emitter_pitch(playera_em, 1);
        audio_emitter_gain(playera_em, .3);
        audio_play_sound_on(playera_em, snd_shotgun, false, 5);
        
        bullet = instance_create(x,y,obj_bullet);
        bullet.speed = 15;
        bullet.direction = point_direction(x,y, mouse_x, mouse_y);
        bullet.image_angle = bullet.direction;
        
        bullet2 = instance_create(x,y,obj_bullet);
        bullet2.speed = 15;
        bullet2.direction = point_direction(x,y, mouse_x, mouse_y) + 7;
        bullet2.image_angle = bullet2.direction;
        
        bullet3 = instance_create(x,y,obj_bullet);
        bullet3.speed = 15;
        bullet3.direction = point_direction(x,y, mouse_x, mouse_y) - 7;
        bullet3.image_angle = bullet3.direction;
        global.shake = 15;
        effect_create_above(ef_smoke,x,y, 0, c_gray);

    } else if (piercing &amp;&amp; spray) {
        audio_emitter_pitch(playera_em, 1);
        audio_emitter_gain(playera_em, .3);
        audio_play_sound_on(playera_em, snd_shotgun, false, 5);
        
        bullet = instance_create(x,y,obj_piercing);
        bullet.speed = 15;
        bullet.direction = point_direction(x,y, mouse_x, mouse_y);
        bullet.image_angle = bullet.direction;
        
        bullet2 = instance_create(x,y,obj_piercing);
        bullet2.speed = 15;
        bullet2.direction = point_direction(x,y, mouse_x, mouse_y) + 7;
        bullet2.image_angle = bullet2.direction;
        
        bullet3 = instance_create(x,y,obj_piercing);
        bullet3.speed = 15;
        bullet3.direction = point_direction(x,y, mouse_x, mouse_y) - 7;
        bullet3.image_angle = bullet3.direction;
    
    } else if (piercing) { 
        bullet = instance_create(x,y,obj_piercing);
        bullet.speed = 15;
        bullet.direction = point_direction(x,y, mouse_x, mouse_y);
        bullet.image_angle = bullet.direction;
    
    } else if (grenade) { 
        audio_emitter_pitch(playera_em, 1);
        audio_emitter_gain(playera_em, .5);
        audio_play_sound_on(playera_em, snd_grenade_launcher, false, 5);
        bullet = instance_create(x,y,obj_grenade);
        bullet.speed = 10;
        bullet.direction = point_direction(x,y, mouse_x, mouse_y);
        bullet.image_angle = bullet.direction;
    
    } else { 
        audio_emitter_pitch(playera_em, 1);
        audio_emitter_gain(playera_em, .3);
        audio_play_sound_on(playera_em, snd_gunshot, false, 5);
        bullet = instance_create(x,y,obj_bullet);
        bullet.speed = 15;
        bullet.direction = point_direction(x,y, mouse_x, mouse_y) + irandom(PlayerStats.aim);
        bullet.image_angle = bullet.direction;
    
    }
   global.fireCounter = 0;
} 
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw the player health bar 
draw_set_font(fnt_lessbig);

pc = (PlayerStats.hp /PlayerStats.max_hp) * 100;
draw_healthbar(16, 96, 230, 116, pc, c_black, c_red, c_lime, 0, true, true)
draw_text_colour(16, 61, "Enemies remaining: " + string(global.enemies), c_white, c_white, c_white, c_white, .75);
draw_text_colour(16, 26, "Kills: " + string(global.kills), c_white, c_white, c_white, c_white, .75);


if(spray)
{
    draw_text_colour(16, 146, "Shotgun Timer: " + string(alarm[0]), c_white, c_white, c_white, c_white, .75);
}

if(grenade)
{
    draw_text_colour(16, 190, "Grenade Timer: " + string(alarm[1]), c_white, c_white, c_white, c_white, .75);
}

//Debugging Tests
//draw_text_colour(800, 26, "Max_HP: " + string(PlayerStats.max_hp), c_white, c_white, c_white, c_white, .75);
//draw_text_colour(800, 56, "Kills: " + string(global.kills), c_white, c_white, c_white, c_white, .75);
//draw_text_colour(800, 86, "Talents: " + string(PlayerStats.talents), c_white, c_white, c_white, c_white, .75);
//draw_text_colour(800, 116, "Crit Chance: " + string(PlayerStats.crit_chance), c_white, c_white, c_white, c_white, .75);
//draw_text_colour(800, 146, "Agility: " + string(PlayerStats.agility), c_white, c_white, c_white, c_white, .75);
//draw_text_colour(800, 176, "Dexterity: " + string(PlayerStats.dexterity), c_white, c_white, c_white, c_white, .75);
//draw_text_colour(800, 206, "Aim: " + string(PlayerStats.aim), c_white, c_white, c_white, c_white, .75);



</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
